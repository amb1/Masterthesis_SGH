# CEA Mapping Konfiguration

# Prioritätsreihenfolge der Datenquellen
data_source_priority:
  - citygml  # Höchste Priorität
  - wfs
  - osm      # Niedrigste Priorität

# Zone.shp Mappings
zone_mappings:
  Name:
    sources:
      citygml: "gml_id"
    transform: "shorten_id"
  
  floors_ag:
    sources:
      citygml: "measuredHeight"
      wfs: "Gebäudeinfo_GESCH_ANZ"
    transform: "to_int"
    default: 4
    required: true
  
  floors_bg:
    sources:
      wfs: "Gebäudeinfo_NS"
    transform: "to_int"
    default: 1
    required: true
  
  height_ag:
    sources:
      citygml: "measuredHeight"
      wfs: "HoeheDach"
    transform: "to_float"
    default: 12.0
  
  height_bg:
    sources:
      wfs: "HoeheGrund"
    transform: "to_float"
    default: 3.0
  
  REFERENCE:
    sources:
      citygml: "gml_id"
    transform: "shorten_id"
  
  house_no:
    sources:
      wfs: "Gebäudeinfo_VONN"
    default: ""
  
  street:
    sources:
      wfs: "Gebäudeinfo_STRNAML"
    default: ""
  
  postcode:
    sources:
      wfs: "Gebäudeinfo_BEZ"
    default: "1010"
  
  house_name:
    sources:
      wfs: "Gebäudeinfo_HA_NAME"
    default: ""
  
  resi_type:
    sources:
      wfs: "Gebäudeinfo_L_NUTZUNG"
      wfs2: "Realnutzung_NUTZUNG_LEVEL1"
    default: ""

# Typology.shp Mappings
typology_mappings:
  Name:
    sources:
      citygml: "gml_id"
    transform: "shorten_id"
  
  YEAR:
    sources:
      wfs: "Gebäudeinfo_BAUJAHR"
    transform: "to_int"
    default: 1960
  
  TYPE:
    sources:
      wfs: "Gebäudeinfo_L_BAUTYP"
      wfs2: "Gebäudetypologie_BAUTYP"
    mapping:
      "Wohngebäude": "MFH"
      "Bürogebäude": "OFFICE"
      "Geschäftsgebäude": "RETAIL"
      "Industriegebäude": "INDUSTRIAL"
      "Öffentliches Gebäude": "PUBLIC"
    default: "MFH"
  
  STANDARD:
    sources:
      wfs: "Gebäudeinfo_L_BAUTYP"
      wfs2: "Gebäudetypologie_BAUTYP_TXT"
    default: "STANDARD"
  
  USE1:
    sources:
      wfs: "Gebäudeinfo_L_NUTZUNG"
      wfs2: "Realnutzung_NUTZUNG_LEVEL1"
    mapping:
      "Wohnen": "RESIDENTIAL"
      "Büro": "OFFICE"
      "Handel": "RETAIL"
      "Industrie": "INDUSTRIAL"
      "Öffentlich": "PUBLIC"
    default: "RESIDENTIAL"
  
  USE1_R:
    sources:
      wfs: "Realnutzung_NUTZUNG_LEVEL1"
    transform: "to_float"
    default: 1.0
  
  USE2:
    sources:
      wfs: "Realnutzung_NUTZUNG_LEVEL2"
    default: "NONE"
  
  USE2_R:
    default: 0
  
  USE3:
    default: "NONE"
  
  USE3_R:
    default: 0

# Transformationsfunktionen
transformations:
  shorten_id:
    description: "Kürzt lange IDs auf 10 Zeichen"
    function: "shorten_id"
    max_length: 10
  
  to_int:
    description: "Konvertiert Werte zu Integer"
    function: "to_int"
  
  to_float:
    description: "Konvertiert Werte zu Float"
    function: "to_float"

# CEA-Mapping-Definitionen
building_type_mapping:
  residential:
    MFH: "MULTI_FAMILY_HOUSE"
    SFH: "SINGLE_FAMILY_HOUSE"
    APT: "APARTMENT"
  commercial:
    OFFICE: "OFFICE"
    RETAIL: "RETAIL"
    RESTAURANT: "RESTAURANT"
  public:
    SCHOOL: "SCHOOL"
    UNIVERSITY: "UNIVERSITY"
    HOSPITAL: "HOSPITAL"
    GOVERNMENT: "GOVERNMENT"
  industrial:
    INDUSTRIAL: "INDUSTRIAL"
    FACTORY: "FACTORY"
    WAREHOUSE: "WAREHOUSE"
  other:
    OTHER: "OTHER"
    UNKNOWN: "UNKNOWN"

construction_type_mapping:
  SOLID: "MASSIVE_CONSTRUCTION"
  PREFAB: "PREFABRICATED"
  LIGHT: "LIGHT_CONSTRUCTION"
  UNKNOWN: "UNKNOWN"

energy_system_mapping:
  heating:
    DISTRICT: "DISTRICT_HEATING"
    GAS: "GAS_HEATING"
    OIL: "OIL_HEATING"
    ELECTRIC: "ELECTRIC_HEATING"
    HEAT_PUMP: "HEAT_PUMP"
    NONE: "NO_HEATING"
  cooling:
    CENTRAL: "CENTRAL_AC"
    SPLIT: "SPLIT_UNITS"
    DISTRICT: "DISTRICT_COOLING"
    NONE: "NO_COOLING"

# Feld-Mappings
field_mappings:
  # Gebäudehöhe und Geschosse
  floors_ag:
    source: "measuredHeight"
    calculation: "value / 3"
    default: 4
  
  floors_bg:
    source: "NS"
    mapping:
      "K": 1
      "*": 0
    default: 1
  
  # Baujahr
  year:
    sources:
      - field: "L_BAUJ"
        type: "direct"
      - field: "OBJ_STR2_TXT"
        type: "period_mapping"
    default: 1960
  
  # Gebäudetyp und Nutzung
  use_type:
    sources:
      - field: "L_BAUTYP"
        type: "building_type_mapping"
      - field: "BAUTYP_TXT"
        type: "building_type_mapping"
    default: "NONE"
  
  # Adressfelder
  postcode:
    source: "BEZ"
    default: "1010"
  
  house_no:
    source: "VONN"
    default: ""
  
  street:
    source: "STRNAML"
    default: ""
  
  resi_type:
    source: "L_NUTZUNG"
    default: ""
